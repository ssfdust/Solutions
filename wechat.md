### 微信问题总结
总算是解决恶心的微信公众号开发，把内容总结一下

#### 开发环境
   * vue
   * vux
   * weixin-js-sdk

#### 开发方式
   route模式:hash
   测试工具：微信开发者工具（js-sdk测试）
　　　　　iPhone 6(实体测试)

#### 本地测试

##### 环境
   * Archlinux
   * gost
   * nginx

##### 测试思路
   使得域名解析为本地ip，从而使得从微信公众号访问本地ip

##### 本地测试步骤
1. 修改本地/etc/hosts，添加特地域名解析为本地ip
2. 运行gost
```bash
gost -L=:8080
```
3. 手机链接WiFi，代理服务器选择本地服务器

#### 核心步骤
* 设置好公众号平台的安全域名
* 由router-link实现无刷新跳转
* 地图以及使用调用微信的js-sdk

#### 问题集合
* 微信ios端分享问题
    * 问题：iOS端分享的一直是第一次进入的页面，而不是随着页面改变而改变
    * 分析：iOS上的微信Browser是手机端的IE6 实际上特别尴尬自身
vue中的路由跳转，是通过pushState方式实现的，而微信Browser自身并
没有对这个方式做url的改变。然而安卓机则没有这个问题。
    * 解决:微信的jsapi提供了一个OnMenuShare的方法，当点击微信右上角分享的时候
可以自定义分享的内容，从而解决了这个问题。

* 地图GPS问题
    * 问题：在公众号中，安卓可以通过点击地址访问位置信息，iPhone则不行。
    * 解决：gps经纬度写反了，把经度写成了纬度，把纬度写成了经度。
    * 猜测：在iPhone中，解析地址可能是通过经纬度，而在安卓中访问则是通过位置名称。

* 图片显示问题
    * 问题：在公众号中，推送到微信公众号平台之后，图片是不能显示的。
    * 分析：微信公众号处于安全考虑 过滤了外部的图片链接，需要通过一个api，换取到微信的图片url
    * 解决：后台使用BeautifulSoup的库，分析html，提取图片url，并上传微信，替换返回后的url

* 处理微信推送提交素材过久
    * 问题：微信推送时，由于处理的内容可能过长，图片过多导致IO阻塞，从而导致超时。
    * 解决：异步处理

